# Kustomize

[Kustomize](https://kustomize.io) is a Kubernetes configuration tool integrated with kubectl. It allows users to customize Kubernetes objects using [kustomization files](intro.md#kustomizationyaml) that contain a set of instructions for Kustomize to generate a new set of resources without altering the original source files.

<div class="getting-started">
<a class="btn btn-primary text-center" href="#">â˜… Installation</a>
<a class="btn text-center" href="intro">Introduction</a>
<a class="btn text-center" href="configure">Configuration</a>
<a class="btn text-center" href="../operations">Operation</a>
</div>

## Prerequisites

You must have all the [prerequisites](../index.md#prerequisites) installed and configured to deploy Sourcegraph with Kustomize.

## Configure

Please follow our [configuration guides](configure.md) to build an overlay for a tailored Sourcegraph deployment.

Once you have built your overlay using the provided components to configure your instance, it is important to review the manifests generated by your overlay to ensure that they are configured correctly. The manifests provide a detailed view of the resources that will be created in your deployment, and by reviewing them, you can ensure that your deployment is configured as desired. This is an important step before deploying your overlay to a production environment.

## Deploy

Below is an overview of deploying Sourcegraph using an overlay configured for Sourcegraph.

**Step 0:** Ensure all the [prerequisites](../index.md#prerequisites) have been met and are properly configured.

**Step 1:** Create an overlay by following the instructions in our [configuration guides](configure.md).

**Step 2:** Use the overlay created in step 1 to generate a new set of manifests without applying to the cluster.

  ```bash
  $ kubectl kustomize $PATH_TO_OVERLAY -o cluster.yaml
  ```

**Step 3:** Review the generated manifests to ensure they match your intended configuration.

  ```bash
  $ less cluster.yaml
  ```

**Step 4:**  Deploy the generated manifests

  ```bash
  $ kubectl apply --prune -l deploy=sourcegraph -f cluster.yaml
  ```

## Upgrade

To upgrade your Sourcegraph Kubernetes instance, please refer to our [upgrade docs for Sourcegraph with Kubernetes](../update.md#upgrades).

## Learn more

See examples for [Amazon EKS](eks.md), [Google GKE](gke.md) and OpenShift(coming soon).
